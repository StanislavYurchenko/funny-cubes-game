(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1DEj":function(t,e,n){},"7vfn":function(t,e,n){var r=n("mp5j");t.exports=(r.default||r).template({1:function(t,e,n,r,s){var a,i=null!=e?e:t.nullContext||{},o=t.hooks.helperMissing,u=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'  <li class="square col-1 rounded border" data-number="'+u("function"==typeof(a=null!=(a=l(n,"number")||(null!=e?l(e,"number"):e))?a:o)?a.call(i,{name:"number",hash:{},data:s,loc:{start:{line:2,column:55},end:{line:2,column:65}}}):a)+'" data-is-active-square="'+u("function"==typeof(a=null!=(a=l(n,"isActiveSquare")||(null!=e?l(e,"isActiveSquare"):e))?a:o)?a.call(i,{name:"isActiveSquare",hash:{},data:s,loc:{start:{line:2,column:90},end:{line:2,column:108}}}):a)+'"></li>\r\n'},compiler:[8,">= 4.3.0"],main:function(t,e,n,r,s){var a;return null!=(a=(t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]})(n,"each").call(null!=e?e:t.nullContext||{},e,{name:"each",hash:{},fn:t.program(1,s,0),inverse:t.noop,data:s,loc:{start:{line:1,column:0},end:{line:3,column:9}}}))?a:""},useData:!0})},Dc6a:function(t,e,n){var r=n("mp5j");t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,n,r,s){var a,i=null!=e?e:t.nullContext||{},o=t.hooks.helperMissing,u=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<tr>\r\n  <th class="p-1 text-center text-primary font-weight-bold" scope="row">'+u("function"==typeof(a=null!=(a=l(n,"position")||(null!=e?l(e,"position"):e))?a:o)?a.call(i,{name:"position",hash:{},data:s,loc:{start:{line:2,column:72},end:{line:2,column:84}}}):a)+'</th>\r\n  <td class="p-1 text-center text-primary font-weight-bold text-break">'+u("function"==typeof(a=null!=(a=l(n,"login")||(null!=e?l(e,"login"):e))?a:o)?a.call(i,{name:"login",hash:{},data:s,loc:{start:{line:3,column:71},end:{line:3,column:80}}}):a)+'</td>\r\n  <td class="p-1 text-center text-primary font-weight-bold">'+u("function"==typeof(a=null!=(a=l(n,"score")||(null!=e?l(e,"score"):e))?a:o)?a.call(i,{name:"score",hash:{},data:s,loc:{start:{line:4,column:60},end:{line:4,column:69}}}):a)+"</td>\r\n</tr>"},useData:!0})},QfWi:function(t,e,n){"use strict";n.r(e);n("1DEj"),n("Omr6");var r=n("qIEf"),s=n.n(r),a=(n("7qfE"),n("RtS0"),n("4owi"),n("uQK7"),n("lmye"),n("fp7Y"),n("WoWj"),n("3dw1"),n("yuY8")),i=n.n(a),o=n("7vfn"),u=n.n(o);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(t,e,n){this._callBackTimerReset=n,this._quantitySquare=144,this._minSquareValue=-1,this._maxSquareValue=10,this._minActiveSquareValue=-1,this._maxActiveSquareValue=2,this._score=0,this._rootRef=document.querySelector(t),this._scoreRef=document.querySelectorAll(e),this._squaresRef=null,this._squaresData=[],this._isGameOver=null,this._isPause=!1}var e,n,r,s=t.prototype;return s.init=function(){this._renderSquareList(),this._squaresData=this._creatSquares(!0),this._renderSquareItem(this._squaresData),this._squaresRef=this._rootRef.firstChild,this._squaresRef.addEventListener("click",this._onSquare.bind(this))},s.startNewGame=function(){this._score=0,this._renderScope(),this._isGameOver=!1,this._squaresData=this._creatSquares(),this._renderSquareItem(this._squaresData)},s.initGameOver=function(){this._isGameOver=!0,this._squaresData=this._creatSquares(!0),this._renderSquareItem(this._squaresData)},s.pause=function(){this._isPause=!0},s.resume=function(){this._isPause=!1},s._randomInteger=function(t,e){return Math.round(t-.5+Math.random()*(e-t+1))},s._creatSquares=function(t){var e=this;return void 0===t&&(t=!1),Array.from({length:this._quantitySquare},(function(){return t?0:e._randomInteger(e._minSquareValue,e._maxSquareValue)})).map((function(t){var n=t>=e._minActiveSquareValue&&t<=e._maxActiveSquareValue&&0!==t;return{number:n?t:0,isActiveSquare:n}}))},s._renderSquareList=function(){this._rootRef.insertAdjacentHTML("afterbegin",i()())},s._renderSquareItem=function(t){this._rootRef.firstChild.innerHTML=u()(t)},s._renderScope=function(){var t=this;this._scoreRef.forEach((function(e){return e.textContent=t._score}))},s._onSquare=function(t){if(!this._isGameOver&&!this._isPause){var e=t.target,n=Array.from(t.currentTarget.children),r=Number(e.dataset.number);if("true"===e.dataset.isActiveSquare){this._score+=+r,this._renderScope();var s=n.indexOf(e);this._squaresData[s]={number:0,isActiveSquare:!1};for(var a=this._randomInteger(0,2);a>0;){var i=this._randomInteger(0,this._quantitySquare-1);if("true"!==n[i].dataset.isActiveSquare){var o=this._randomInteger(this._minActiveSquareValue,this._maxActiveSquareValue);0!==o&&(this._squaresData[i]={number:o,isActiveSquare:!0},a-=1)}}if(this._renderSquareItem(this._squaresData),this._isGameOver=this._squaresData.every((function(t){return!t.isActiveSquare})),this._isGameOver)return this._callBackTimerReset(),void this.initGameOver()}}},e=t,(n=[{key:"score",get:function(){return this._score}}])&&l(e.prototype,n),r&&l(e,r),t}(),h=(n("JBxO"),n("9UJh"),n("e+qc"),function(){function t(t,e,n){this._root=document.querySelector(e),this._setPointTime=t,this._startTime=null,this._startPauseTime=null,this._stopPauseTime=null,this._totalPauseTime=0,this._callBackTimeOver=n,this._timeLeft=0,this._intervalId=null}var e=t.prototype;return e.init=function(){this._render(this._convertTime(this._setPointTime)),clearTimeout(this._intervalId),this._stopPauseTime=Date.now(),this._startPauseTime=this._stopPauseTime,this._totalPauseTime=0},e._tick=function(){var t=this;this._intervalId=setTimeout((function(){t._tick(),t._timeLeft=t._setPointTime-Date.now()+t._startTime+t._totalPauseTime,t._render(t._convertTime(t._timeLeft)),t._timeLeft<=0&&t.stop()}),1e3)},e.reset=function(){this.init()},e._render=function(t){this._root.textContent=t},e._convertTime=function(t){return Math.floor(t%864e5/36e5).toString().padStart(2,"0")+":"+Math.floor(t%36e5/6e4).toString().padStart(2,"0")+":"+Math.round(t%6e4/1e3).toString().padStart(2,"0")},e.start=function(){this.init(),this._startTime=Date.now(),this._tick()},e.pause=function(){this._startPauseTime=Date.now(),clearTimeout(this._intervalId)},e.resume=function(){this._stopPauseTime=Date.now(),this._totalPauseTime+=this._stopPauseTime-this._startPauseTime,this._tick()},e.stop=function(){this.init(),this._callBackTimeOver&&this._callBackTimeOver()},t}());n("hi3g"),n("wCa+"),n("FdtR");function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(){this._ratingList=[],this._currentUser={login:"Anonymous",name:"Anonymous",role:"gamer"}}var e,n,r,s=t.prototype;return s.init=function(t){this.getResults(t)},s.getResults=function(t){var e=this;fetch("http://localhost:9090/results").then((function(t){return t.json()})).then((function(t){var e=t.bestTenResults,n=t.user,r=e.map((function(t,e){return Object.assign({},t,{position:e+1})}));return console.log(r,n),{results:r,user:n}})).then((function(n){var r=n.results,s=n.user;e._currentUser=s,e._ratingList=[].concat(r),t()})).catch((function(t){return console.log(t)}))},s.addMember=function(t,e){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("http://localhost:9090/results",n).then((function(t){return t.json()})).then((function(t){e()})).catch((function(t){return console.log(t)}))},e=t,(n=[{key:"ratingList",get:function(){return this._ratingList}},{key:"currentUser",get:function(){return this._currentUser}}])&&m(e.prototype,n),r&&m(e,r),t}(),p=n("e3pj"),d=n.n(p),_=n("Dc6a"),v=n.n(_);var q=document.querySelector(".js-start"),y=document.querySelector(".js-new-game"),g=document.querySelector(".js-add-result"),b=document.querySelector(".js-pause"),S=new c(".js-box",".js-scope",(function(){T.reset(),w(q),s()(".js-result-modal").modal("show")})),T=new h(6e4,".js-timer",(function(){S.initGameOver(),w(q),s()(".js-result-modal").modal("show")})),x=new f;function w(t){t.innerHTML="Start",t.dataset.status="start"}function P(t){var e,n,r,s,a,i;e=".js-hall-of-fame",r=t,s=(n=x).ratingList,a=n.currentUser,(i=document.querySelector(e)).innerHTML=d()({ratingList:s,currentUser:a}),r&&i.querySelector(".tbody").insertAdjacentHTML("beforeend",v()(r))}q.addEventListener("click",(function(t){var e=t.currentTarget.dataset.status;"start"===e&&(S.startNewGame(),T.start()),"pause"===e&&(T.pause(),S.pause(),b.classList.remove("invisible")),"resume"===e&&(T.resume(),S.resume(),b.classList.add("invisible")),function(t){var e=t.currentTarget,n=e.dataset.status;"start"!==n&&"resume"!==n||(e.innerHTML="Pause",e.dataset.status="pause"),"pause"===n&&(e.innerHTML="Resume",e.dataset.status="resume")}(t)})),y.addEventListener("click",(function(){var t;"resume"===q.dataset.status&&(T.resume(),S.resume(),b.classList.add("invisible")),S.startNewGame(),T.start(),(t=q).innerHTML="Pause",t.dataset.status="pause"})),g.addEventListener("submit",(function(t){t.preventDefault();var e=t.currentTarget,n={login:x.currentUser.login,score:S.score};x.addMember(n,(function(){})),x.getResults((function(){return P(n)})),e.reset(),s()(".js-result-modal").modal("hide")})),S.init(),T.init(),x.init(P)},e3pj:function(t,e,n){var r=n("mp5j");t.exports=(r.default||r).template({1:function(t,e,n,r,s){var a,i=null!=e?e:t.nullContext||{},o=t.hooks.helperMissing,u=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'      <tr>\r\n        <th class="p-1 text-center" scope="row">'+u("function"==typeof(a=null!=(a=l(n,"position")||(null!=e?l(e,"position"):e))?a:o)?a.call(i,{name:"position",hash:{},data:s,loc:{start:{line:16,column:48},end:{line:16,column:60}}}):a)+'</th>\r\n        <td class="p-1 text-center text-break">'+u("function"==typeof(a=null!=(a=l(n,"login")||(null!=e?l(e,"login"):e))?a:o)?a.call(i,{name:"login",hash:{},data:s,loc:{start:{line:17,column:47},end:{line:17,column:56}}}):a)+'</td>\r\n        <td class="p-1 text-center">'+u("function"==typeof(a=null!=(a=l(n,"score")||(null!=e?l(e,"score"):e))?a:o)?a.call(i,{name:"score",hash:{},data:s,loc:{start:{line:18,column:36},end:{line:18,column:45}}}):a)+"</td>\r\n      </tr>\r\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,r,s){var a,i=t.lambda,o=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<h4 class="text-center">Hall of fame</h4>\r\n<p class="p-1 text-center text-primary font-weight-bold text-break">Hello '+o(i(null!=(a=null!=e?u(e,"currentUser"):e)?u(a,"login"):a,e))+'!</p>\r\n<p class="p-1 text-center text-primary font-weight-bold text-break">Your best result is: '+o(i(null!=(a=null!=e?u(e,"currentUser"):e)?u(a,"bestResult"):a,e))+'!</p>\r\n\r\n<table class="table">\r\n  <thead>\r\n    <tr>\r\n      <th class="p-2 text-center" scope="col">#</th>\r\n      <th class="p-2 text-center" scope="col">Login</th>\r\n      <th class="p-2 text-center" scope="col">Score</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody class="tbody">\r\n'+(null!=(a=u(n,"each").call(null!=e?e:t.nullContext||{},null!=e?u(e,"ratingList"):e,{name:"each",hash:{},fn:t.program(1,s,0),inverse:t.noop,data:s,loc:{start:{line:14,column:4},end:{line:20,column:13}}}))?a:"")+"  </tbody>\r\n</table>"},useData:!0})},yuY8:function(t,e,n){var r=n("mp5j");t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,n,r,s){return'<ul class="row border squares">\r\n</ul>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.965eb599c647051ac6fe.js.map